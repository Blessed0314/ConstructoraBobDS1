<div class="registration-form animated fadeIn">
  <form #registroForm="ngForm">
      <div class="form-icon">
          <span><i class="icon icon-user"></i></span>
      </div>
      <div>
          <h1 class="form-title">Constructora Bob</h1>
          <h3 class="form-title">Registro de Avances de Tareas de Obra</h3>
      </div>

      <div class="form-group">
          <textarea  type="text"
                  class="form-control item"
                  id="descripcion"
                  rows="4"
                  cols="50"
                  name="descripcion"
                  placeholder="Descripci贸n del avance"
                  required
                  [(ngModel)]="datos.descripcion"
                  [class.is-invalid] = "registroForm.controls['descripcion']?.errors?.['required'] && registroForm.controls['descripcion'].dirty">
          </textarea>
          <div *ngIf="registroForm.controls['descripcion'].invalid && (registroForm.controls['descripcion'].dirty || registroForm.controls['descripcion'].touched)" class="alert alert-danger">
            <div *ngIf="registroForm.controls['descripcion']?.errors?.['required']">
                Por favor, ingresa la descripci贸n del avance.
            </div>
          </div>
      </div>


      <div class="form-group m-5">
        <h4 class="text-center">Fotos del Avance</h4>
        <ngx-dropzone (change)="onSelect($event)">
          <ngx-dropzone-label>Ingresa o suelta tu imagen</ngx-dropzone-label>
          <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
            <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
          </ngx-dropzone-preview>
        </ngx-dropzone>
      </div>

      <div class="form-group m-5 audio">
        <div class="form-group m-1">
          <button type="button" class="btn btn-primary m-1" (click)="startRecording()">Iniciar grabaci贸n</button>
          <button type="button" class="btn btn-danger m-1" (click)="stopRecording()">Detener grabaci贸n</button>
        </div>
        <audio *ngIf="recordedAudioUrl" controls>
          <source [src]="recordedAudioUrl" type="audio/mpeg">
        </audio>

      </div>

      <div class="form-group btn-class">
          <button type="submit" class="btn create-account" [disabled]="registroForm.invalid" (click)="registrarAvance()" >
            {{isLoading ? 'Guardando...' : 'Registrar Usuario'}}
          </button>
      </div>



  </form>
</div>
